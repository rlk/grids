<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <link rel="stylesheet" type="text/css" href="user-guide.css" />
  <link rel="stylesheet" type="text/css" href="../grid.css" />
  <script type="module" src="../grid.js"></script>
  <style>
    .colorInterval .dot {
      fill: gray !important;
    }

    .colorInterval .interval1 {
      fill: black !important;
    }

    .colorInterval .interval3 {
      fill: blue !important;
    }

    .colorInterval .interval5 {
      fill: red !important;
    }

    .colorInterval .interval7 {
      fill: green !important;
    }

    .colorDegree .dot {
      fill: gray !important;
    }

    .colorDegree .degree1 {
      fill: black !important;
    }

    .colorDegree .degree3 {
      fill: blue !important;
    }

    .colorDegree .degree5 {
      fill: red !important;
    }

    .colorDegree .degree7 {
      fill: green !important;
    }
  </style>
  <title>Gridgen User Guide</title>
</head>

<body>
  <h1>Gridgen User Guide</h1>
  <p>Gridgen is a visual calculator for guitar chords. It's capable of manipulating chords, inferring chord symbols, rendering chord grids to SVGs, and embedding SVGs in HTML documents. Here's an example output.</p>
  <p class="display">
    <span class="gridgen">
      C 1 chord 6 8 1 + 5 10 5 + 3 9 3 + 2 12 7 x
      C 4 chord 5 8 1 + 4 10 5 + 3 9 7 x 2 10 3 +
      over d- over d- over d- over d- over d- over d- am span
    </span>
  </p>
  <p>Gridgen content appears within HTML span or td elements with &ldquo;gridgen&rdquo; class. Each element's innerHTML is interpreted as a chord calculation expression, the result of which replaces that element in the document.</p>
  <p>These chord manipulations and diagrams are based on the works of <a href="https://www.tedgreene.com/">Ted Green</a>.</p>
  <ul>
    <li id="cc">Greene, Ted. <i>Chord Chemistry.</i> Alfred Music Publishing, 1971.</li>
    <li id="mcp">Greene, Ted. <i>Modern Chord Progressions.</i> Vol. 1. Alfred Music Publishing, 1976.</li>
  </ul>

  <h2>Examples</h2>
  <h3>Tunes</h3>
  <ul>
    <li><a href="christmas-time-is-here.html">christmas-time-is-here.html</a></li>
    <li><a href="julia.html">julia.html</a></li>
    <li><a href="lets-call-the-whole-thing-off.html">lets-call-the-whole-thing-off.html</a></li>
    <li><a href="star-trek.html">star-trek.html</a></li>
  </ul>
  <h3>References</h3>
  <ul>
    <li><a href="I-IV-V-in-five-keys.html">I-IV-V-in-five-keys.html</a></li>
    <li><a href="I-IV-V-in-five-positions.html">I-IV-V-in-five-positions.html</a></li>
    <li><a href="c-I-V-triads.html">c-I-V-triads.html</a></li>
    <li><a href="c-diatonic-chords-in-five-forms.html">c-diatonic-chords-in-five-forms.html</a></li>
    <li><a href="c-seventh-arpeggios.html">c-seventh-arpeggios.html</a></li>
    <li><a href="chord-scales-long.html">chord-scales-long.html</a></li>
    <li><a href="chord-scales-short.html">chord-scales-short.html</a></li>
    <li><a href="g-chord-scale-tables.html">g-chord-scale-tables.html</a></li>
  </ul>

  <h2>Representation</h2>
  <p>Each Chord has a specified <em>key</em> and <em>degree</em> within that key. For example a G chord might have degree 1 in the key of G, degree 4 in the key of D, or degree 5 in the key of C. This is to ensure that manipulations on that chord are performed diatonically within its key.</p>
  <p>Similarly, each Stop has a specified <em>interval</em> within its chord. For example, an E stop in a C chord would have interval 3. This is to ensure that chord symbols can be correctly inferred, even after chord manipulation. A C chord that marks an E♭ with an interval of 3 would be noted <span class="chord">Cmi</span>.</p>

  <h2>Operations</h2>
  <h3>Introduction</h3>
  <p>Here's a minimal example to get started. The expression <code>F 4 chord 4 8 1 + 3 7 3 + 2 6 5 + span</code> produces <span class="gridgen">F 4 chord 4 8 1 + 3 7 3 + 2 6 5 + span</span></p>
  <p>This is a <a href="https://en.wikipedia.org/wiki/Reverse_Polish_notation">postfix</a> expression. Its evaluation uses a stack. It proceeds as follows:</p>
  <ul>
    <li><code>F 4 chord</code> is a <a href="#chord-constructor">chord constructor</a>.
      <ul>
        <li>The <code>F</code> and <code>4</code> are pushed onto the stack.</li>
        <li>The <code>chord</code> operator pops those operands and pushes a new chord with degree 4 in the key of F.</li>
      </ul>
    </li>
    <li><code>4 8 1 +</code> is a <a href="#dot-stop">dot stop</a>.
      <ul>
        <li>The <code>4</code>, <code>8</code>, and <code>1</code> are pushed onto the stack. They represent the string, fret, and interval.</li>
        <li>The <code>+</code> operator pops the three operands from the stack, along with the chord remaining on the stack from the previous step. It adds a new stop to the chord, and pushes the resulting chord back onto the top of the stack.</li>
      </ul>
    </li>
    <li><code>3 7 3 +</code> is another dot stop operation, leaving a chord with two stops on the stack.
    <li><code>2 6 5 +</code> is another dot stop operation, leaving a chord with three stops on the stack.
    <li><code>span</code> pops the chord from the stack, creates an HTML <a href="#span-element">span element</a> to represent it, and pushes the element onto the stack.</li>
  </ul>
  <p>At the end of all of this, only an HTML element remains on the stack. It is inserted into the document.</p>

  <h3 id="chord-constructor">Chord Constructor</h3>
  <dl>
    <dt><i>&lt;key&gt;</i> <i>&lt;degree&gt;</i> <code>chord</code></dt>
    <dd>Create a new chord and push it onto the stack. <i>&lt;Key&gt;</i> is a symbol like <code>C</code> or <code>B♭</code> and <i>&lt;degree&gt;</i> is the chord degree in the range 1 to 7. This is the fundamental constructor of Gridgen chords and all other operators operate on these.</dd>
  </dl>

  <h3>Chord Attribute Operators</h3>
  <p>These operators add attributes to chords. The most important of these attributes are the stops that define the notes of the chord. Greene notation uses five distinct symbols, the dot, X, square and diamond, to be played in that order. An open circle is an optional stop. (<a href="#cc">CC</a> p.?)</p>
  <p>The stop appears at the given <i>&lt;string&gt;</i> and <i>&lt;fret&gt;</i>. The stop's voice within the chord has <i>&lt;interval&gt;</i> in the range 1 to 7. These values are popped from the stack, and the <i>&lt;chord&gt;</i> operand is pushed back onto the stack after the attribute is set.</p>
  <dl>
    <dt id="dot-stop"><i>&lt;chord&gt;</i> <i>&lt;string&gt;</i> <i>&lt;fret&gt;</i> <i>&lt;interval&gt;</i> <code>+</code></dt>
    <dd>Add a dot stop to a chord.</dd>
    <dt id="x-stop"><i>&lt;chord&gt;</i> <i>&lt;string&gt;</i> <i>&lt;fret&gt;</i> <i>&lt;interval&gt;</i> <code>x</code></dt>
    <dd>Add an X stop to a chord.</dd>
    <dt id="square-stop"><i>&lt;chord&gt;</i> <i>&lt;string&gt;</i> <i>&lt;fret&gt;</i> <i>&lt;interval&gt;</i> <code>=</code></dt>
    <dd>Add a square stop to a chord.</dd>
    <dt id="diamond-stop"><i>&lt;chord&gt;</i> <i>&lt;string&gt;</i> <i>&lt;fret&gt;</i> <i>&lt;interval&gt;</i> <code>^</code></dt>
    <dd>Add a diamond stop to a chord.</dd>
    <dt id="circle-stop"><i>&lt;chord&gt;</i> <i>&lt;string&gt;</i> <i>&lt;fret&gt;</i> <i>&lt;interval&gt;</i> <code>o</code></dt>
    <dd>Add a circle stop to a chord.</dd>
    <dt id="blank-stop"><i>&lt;chord&gt;</i> <i>&lt;string&gt;</i> <i>&lt;fret&gt;</i> <i>&lt;interval&gt;</i> <code>_</code></dt>
    <dd>Add a blank stop to a chord. A blank stop does not appear on the grid, but it can be used to influence <a href="#chord-alignment-operators">alignment operations</a> and chord symbol inference. (For example, if a chord voicing omits the root, then the symbol inference will likely fail for lack of information. Adding a root using a blank stop informs the inference without altering the appearance.)</dd>
    <dt id="decor-stop"><i>&lt;chord&gt;</i> <i>&lt;string&gt;</i> <i>&lt;fret&gt;</i> <i>&lt;interval&gt;</i> <code>(+)</code> or <code>(x)</code> or <code>(=)</code> or <code>(^)</code> or <code>(o)</code> or <code>(_)</code></dt>
    <dd>Add a &ldquo;decoration&rdquo; stop to a chord. Decoration stops appear exactly like their counterparts above, but they do not contribute to the chord symbol. They may be used to notate a melody or bass line without altering the tune's basic changes.</dd>
    <dt><i>&lt;chord&gt;</i> <i>&lt;string&gt;</i> <i>&lt;fret&gt;</i> <i>&lt;interval&gt;</i> <i>&lt;label&gt;</i> <code>.</code></dt>
    <dd>Add a stop with an arbitrary label to a chord. See <a href="#arbitrary-stop-labels">Arbitrary stop labels</a> for examples.</dd>
  </dl>
  <h3>Chord Option Operators</h3>
  <p>Chord options determine how chords are displayed.</p>
  <dl>
    <dt><i>&lt;chord&gt;</i> <code>$</code></dt>
    <dd>Omit the chord symbol.</dd>
    <dt><i>&lt;chord&gt;</i> <code>?</code></dt>
    <dd>Mark the chord as optional. The chord's symbol will be shown in parentheses.</dd>
    <dt><i>&lt;chord&gt;</i> <i>&lt;text&gt;</i> <code>!</code></dt>
    <dd>Add a small text appearing beneath a chord. This can be used to annotate a chord with a description or performance notes. See <a href="#noting-time">Noting time</a> for examples.</dd>
    <dt><i>&lt;chord&gt;</i> <i>&lt;string&gt;</i> <i>&lt;finger&gt;</i> <code>#</code></dt>
    <dd>Add a finger number at the bottom of a chord. There is at most one number shown per <i>&lt;string&gt;</i>. <i>&lt;Finger&gt;</i> is usually a number between 1 and&nbsp;4.</dd>
  </dl>

  <h3>Chord Manipulation Operators</h3>
  <p>The following operations replace the chord at the top of a stack with the result of a calculation based on that chord.</p>
  <dl>
    <dt><i>&lt;chord&gt;</i> <code>s+</code></dt>
    <dd>Replace <i>&lt;chord&gt;</i> with the chord on the next higher set of strings (higher in number, not in pitch). The chord is moved up 5 frets. (<a href="#mcp">MCP</a> p.18)</dd>
    <dt><i>&lt;chord&gt;</i> <code>s-</code></dt>
    <dd>Replace <i>&lt;chord&gt;</i> with the chord on the next lower set of strings. The chord is moved down 5 frets. (<a href="#mcp">MCP</a> p.19)</dd>
    <dt><i>&lt;chord&gt;</i> <code>d+</code></dt>
    <dd>Replace <i>&lt;chord&gt;</i> with the next higher chord in the diatonic chord scale, e.g. <span class="chord">Cma<sup>7</sup></span> becomes <span class="chord">Dmi<sup>7</sup></span>. (<a href="#mcp">MCP</a> p.17)</dd>
    <dt><i>&lt;chord&gt;</i> <code>d-</code></dt>
    <dd>Replace <i>&lt;chord&gt;</i> with the next lower chord in the diatonic chord scale, e.g. <span class="chord">Cma<sup>7</sup></span> becomes <span class="chord">Bmi<sup>7♭5</sup></span>. (<a href="#mcp">MCP</a> p.17)</dd>
    <dt><i>&lt;chord&gt;</i> <code>i+</code></dt>
    <dd>Replace <i>&lt;chord&gt;</i> with the next higher chord in the systematic inversion. (<a href="#cc">CC</a> p.9)</dd>
    <dt><i>&lt;chord&gt;</i> <code>i-</code></dt>
    <dd>Replace <i>&lt;chord&gt;</i> with the next lower chord in the systematic inversion. (<a href="#cc">CC</a> p.9)</dd>
    <dt><i>&lt;chord&gt;</i> <code>o+</code></dt>
    <dd>Replace <i>&lt;chord&gt;</i> with the chord on the same strings, one octave higher.</dd>
    <dt><i>&lt;chord&gt;</i> <code>o-</code></dt>
    <dd>Replace <i>&lt;chord&gt;</i> with the chord on the same strings, one octave lower.</dd>
    <dt><i>&lt;chord&gt;</i> <code>4+</code></dt>
    <dd>Replace <i>&lt;chord&gt;</i> with the chord a fourth higher, on the next lower set of strings. <span class="chord">Cma<sup>7</sup></span> rooted on 5 becomes <span class="chord">Fma<sup>7</sup></span> rooted on 4. This is an abbreviation for <code>d+ d+ d+ s-</code>.</dd>
    <dt><i>&lt;chord&gt;</i> <code>5-</code></dt>
    <dd>Replace <i>&lt;chord&gt;</i> with the chord a fifth lower, on the next higher set of strings. <span class="chord">Cma<sup>7</sup></span> rooted on 5 becomes <span class="chord">G<sup>7</sup></span> rooted on 6. This is an abbreviation for <code>d- d- d- d- s+</code>.</dd>
  </dl>
  <p>It's possible for these operations to produce an &ldquo;invalid&rdquo; chord—a chord that uses negative fret numbers or non-existent strings. Such invalid chords are well-defined, and useful as temporary values. However, if they are displayed, they might appear impossible.

  <h3 id="chord-alignment-operators">Chord Alignment Operators</h3>
  <p>Chord alignment operators take a sequence of chords, equalize their size, and align them visually.</p>
  <dl>
    <dt><i>&lt;&middot; &middot; &middot;&gt;</i> <code>af</code></dt>
    <dd>Align all of the chords on the stack by fret. Specifically, set the bounds of each grid to the same value across all chords. Stretch the grid to accommodate a wide range.</dd>
    <dt><i>&lt;&middot; &middot; &middot;&gt;</i> <code>am</code></dt>
    <dd>Align all of the chords on the stack by mark. Specifically, set the bounds of each grid such that the marked fret (usually the root) lies in the same position in all chords.</dd>
  </dl>
  <p>This is almost always desirable, as each unaligned grid is displayed with minimal size. As a group, they will appear visually inconsistent.</p>

  <h3>Notation Constructors</h3>
  <dl>
    <dt><code>|:</code></dt>
    <dd>Push a left repeat sign.</dd>
    <dt><code>|</code></dt>
    <dd>Push a bar marker.</dd>
    <dt><code>:|</code></dt>
    <dd>Push a right repeat sign.</dd>
    <dt><code>spc</code></dt>
    <dd>Push a blank space. This is most useful when laying out tables using the <code>td</code> operator.</dd>
  </dl>

  <h3>HTML Element Constructors</h3>
  <p>HTML element constructors replace each item on the stack with an HTML element with class &ldquo;grid&rdquo;. On completion, this list of elements replaces the &ldquo;gridgen&rdquo; element whose innerHTML expression generated it.</p>
  <p>All of the classes on the original element are added to the new one. The existing &ldquo;gridgen&rdquo; class is replaced with class &ldquo;grid&rdquo;.
  <dl>
    <dt id="td-element"><i>&lt;&middot; &middot; &middot;&gt;</i> <code>td</code></dt>
    <dd>Replace each chord on the stack with a td element.</dd>
    <dt id="span-element"><i>&lt;&middot; &middot; &middot;&gt;</i> <code>span</code></dt>
    <dd>Replace each chord on the stack with a span element.</dd>
  </dl>

  <h3>General Stack Operators</h3>
  <dl>
    <dt id="drop"><i>&lt;A&gt;</i> <code>drop</code></dt>
    <dd>Pop the top element from the stack.</dd>
    <dt id="dupe"><i>&lt;A&gt;</i> <code>dupe</code></dt>
    <dd>Duplicate the top element on the stack. The stack will contain <i>&lt;A&gt;</i> <i>&lt;A&gt;</i>.</dd>
    <dt id="swap"><i>&lt;A&gt;</i> <i>&lt;B&gt;</i> <code>swap</code></dt>
    <dd>Swap the top two elements on the stack. The stack will contain <i>&lt;B&gt;</i> <i>&lt;A&gt;</i>.</dd>
    <dt id="over"><i>&lt;A&gt;</i> <i>&lt;B&gt;</i> <code>over</code></dt>
    <dd>Duplicate the second element to the top of the stack. The stack will contain <i>&lt;A&gt;</i> <i>&lt;B&gt;</i> <i>&lt;A&gt;</i>.</dd>
  </dl>

  <h2>Samples</h2>
  <p>The following is a list of gridgen examples. To see how each is defined, examine the HTML source of this document.</p>

  <h3 id="arbitrary-stop-labels">Arbitrary Stop Labels</h3>
  <p>The <code>.</code> operator adds a stop with an arbitrary character label. This has countless uses. For example, it may be used to indicate the fingering of a scale. This being the web, all of Unicode is at your disposal here.</p>
  <p class="display" style="zoom:150%">
    <span class="gridgen">
      D 1 chord $
      6 2 3 1 . 6 3 4 2 . 6 5 5 4 .
      5 2 6 1 . 5 4 7 3 . 5 5 1 4 .
      4 2 2 1 . 4 4 3 3 . 4 5 4 4 .
      3 2 5 1 . 3 4 6 3 . 2 2 7 1 .
      2 3 1 2 . 2 5 2 4 .
      1 2 3 1 . 1 3 4 2 . 1 5 5 4 .
      span
    </span>
    <span class="gridgen">
      D 1 chord $
      6 2 3 🍏 . 6 3 4 🍎 . 6 5 5 🍊 .
      5 2 6 🍋 . 5 4 7 🍋‍🟩 . 5 5 1 🍌 .
      4 2 2 🍉 . 4 4 3 🍇 . 4 5 4 🍓 .
      3 2 5 🫐 . 3 4 6 🍈 . 2 2 7 🍒 .
      2 3 1 🍑 . 2 5 2 🥭 .
      1 2 3 🍍 . 1 3 4 🥥 . 1 5 5 🥝 .
      span
    </span>
  </p>

  <h3 id="noting-time">Noting Time</h3>
  <p>Greene frequently used slashes beneath the chord grid to indicate the number of beats that a chord is played (<a href="#cc">CC</a> p.58). This can be accomplished using the <code>!</code> operator.</p>
  <p class="display">
    <span class="gridgen">
      F 4 chord 6 7 1 + 4 7 7 + 3 7 3 + 1 5 7 + 2 6 5 x 6 2 # 4 3 # 3 4 # 2 1 # 1 1 # // !
      F 4 chord 6 6 1 + 4 6 7 + 3 6 3 + 2 5 5 + 6 2 # 4 3 # 3 4 # 2 1 # / !
      F 3 chord 6 5 1 + 4 5 7 + 3 5 3 + 2 8 7 + 2 5 5 x 6 1 # 4 1 # 3 1 # 2 4 # // !
      F 3 chord 6 4 1 + 4 4 7 + 3 4 3 + 2 4 5 + 6 1 # 4 1 # 3 1 # 2 1 # / !
      F 2 chord 6 3 1 + 4 3 7 + 3 3 3 + 2 6 7 + 2 3 5 x 6 1 # 4 1 # 3 1 # 2 4 # // !
      F 4 chord 6 8 2 (+) 4 8 1 + 3 7 3 + 2 6 5 + 6 3 # 4 4 # 3 2 # 2 1 # / !
      F 1 chord 5 8 1 + 4 7 3 + 3 9 7 + 2 8 2 + 5 2 # 4 1 # 3 4 # 2 3 # /// !
      af span
    </span>
  </p>
  <p>Alternatively, bar markers can indicate full measures, and can imply beat count, They also provide the opportunity to add repeat markers. For example, here's the melody and accompaniment to the lyric &ldquo;You say to-ma-to, I say to-mah-to.&rdquo;</p>
  <p class="display">
    <span class="gridgen">
      |:
      G 1 chord 6 3 1 + 4 5 1 + 3 4 3 + 2 5 6 + 1 3 1 + 2 5 6 x 6 1 # 4 3 # 3 2 # 2 4 # 1 1 #
      G 6 chord 5 7 1 + 4 5 3 + 3 7 7 + 2 7 2 + 2 7 2 x 2 5 1 = 5 2 # 4 1 # 3 3 # 2 4 #
      |
      G 2 chord 6 5 1 + 4 5 7 + 3 5 3 + 2 8 7 + 1 5 1 x 6 1 # 4 1 # 3 1 # 2 4 # 1 1 #
      G 5 chord 5 5 1 + 4 7 5 + 3 5 7 + 2 5 2 _ 2 7 3 + 1 7 6 + 1 7 6 x 5 1 # 4 2 # 3 1 # 2 3 # 1 4 #
      :|
      af span
    </span>
  </p>

  <h3>Overlaying Stops</h3>
  <p>Overlaid stops appear when an elaboration or a melody reuses a chord tone. The &ldquo;to-ma-to, to-mah-to&rdquo; sequence just above is an example.</p>
  <p>Order sometimes matters. Stops are displayed in the order they are added to a chord. Later stops are displayed topmost. Here's a grid showing each of the standard markers—dot, circle, X, square, and diamond—overlaid with each other standard marker. It should be clear that dot and X should appear on top, while square, diamond, and circle must appear on the bottom.</code></p>
  <p class="display" style="zoom:150%">
    <span class="gridgen">
      C 1 chord $
      5 3 1 + 4 3 1 o 3 3 1 x 2 3 1 = 1 3 1 ^

      5 4 1 + 4 4 1 o 3 4 1 x 2 4 1 = 1 4 1 ^
      6 4 1 + 5 4 1 + 4 4 1 + 3 4 1 + 2 4 1 + 1 4 1 +
      5 5 1 + 4 5 1 o 3 5 1 x 2 5 1 = 1 5 1 ^
      6 5 1 o 5 5 1 o 4 5 1 o 3 5 1 o 2 5 1 o 1 5 1 o
      5 6 1 + 4 6 1 o 3 6 1 x 2 6 1 = 1 6 1 ^
      6 6 1 x 5 6 1 x 4 6 1 x 3 6 1 x 2 6 1 x 1 6 1 x
      5 7 1 + 4 7 1 o 3 7 1 x 2 7 1 = 1 7 1 ^
      6 7 1 = 5 7 1 = 4 7 1 = 3 7 1 = 2 7 1 = 1 7 1 =
      5 8 1 + 4 8 1 o 3 8 1 x 2 8 1 = 1 8 1 ^
      6 8 1 ^ 5 8 1 ^ 4 8 1 ^ 3 8 1 ^ 2 8 1 ^ 1 8 1 ^
      span
    </span>
  </p>

  <h3>Size</h3>
  <p>To produce larger or smaller grids, set the <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/zoom">zoom</a> CSS property on the container of the element with gridgen class.</p>
  <p class="display" style="zoom:150%">
    <span class="gridgen">
      C 1 chord 5 3 1 + 4 2 3 + 3 4 7 + 2 3 2 + dupe d+ dupe d+ dupe d+ dupe d+ dupe d+ dupe d+ dupe d+ am span
    </span>
  </p>

  <h3>Stop Styling</h3>
  <p>Stops are defined as SVG elements with classes that indicate their musical meaning:</p>
  <ul>
    <li>Classes &ldquo;pitch1&rdquo; through &ldquo;pitch12&rdquo; give the pitch.</li>
    <li>Classes &ldquo;degree1&rdquo; through &ldquo;degree7&rdquo; give the scale degree within the key.</li>
    <li>Classes &ldquo;interval1&rdquo; through &ldquo;interval7&rdquo; give the interval within the chord.</li>
  </ul>
  <p>To use these, define a CSS class to apply to the Gridgen element or its container. Then use <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/Descendant_combinator">descendant combinators</a> to select pitches, degrees, and intervals among that container's children. Note that the <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/important">!important</a> property is needed if local changes are to override the SVG's existing CSS. See the source of this document for examples.</p>
  <p>Here's a chord scale with stops colored by interval.</p>
  <p class="display">
    <span class="gridgen colorInterval">
      C 1 chord 5 3 1 + 4 5 5 + 3 4 7 + 2 5 3 + dupe d+ dupe d+ dupe d+ dupe d+ dupe d+ dupe d+ dupe d+ am span
    </span>
  </p>
  <p>Here's a chord scale with stops colored by scale degree.</p>
  <p class="display">
    <span class="gridgen colorDegree">
      C 1 chord 5 3 1 + 4 5 5 + 3 4 7 + 2 5 3 + dupe d+ dupe d+ dupe d+ dupe d+ dupe d+ dupe d+ dupe d+ am span
    </span>
  </p>

  <h3>Forms for Diatonic Chord Scales</h3>
  <p>(<a href="#mcp">MCP</a>, p. 21) introduces several forms for diatonic chord scales based on first-inversion triads, and suggests the reader build diatonic chords from each of them. We can easily generate solutions to these exercises by specifying the initial form and extending the sequence with several <code>dupe d+</code> operations.</p>
  <p>Clearly, the blind extension of these forms takes us quickly into the high frets. That's part of the exercise. When displaying chord grids, we <em>could</em> use string transference (<code>s+</code> and <code>s-</code>) or shift the octave (<code>o+</code> and <code>o-</code>) to accommodate. There are many ways to use operators to make these comfortably playable.</p>
  <p class="display">
    <span class="block">
      <span class="gridgen">
        E 1 chord 6 4 3 + 4 2 1 + 3 4 5 + 2 5 1 + dupe d+ dupe d+ dupe d+ dupe d+ dupe d+ dupe d+ am span
      </span>
    </span>
    <span class="block">
      <span class="gridgen">
        E 1 chord 5 11 3 + 3 9 1 + 2 12 5 + 1 12 1 + dupe d+ dupe d+ dupe d+ dupe d+ dupe d+ dupe d+ am span
      </span>
    </span>
    <span class="block">
      <span class="gridgen">
        E 1 chord 6 4 3 + 3 4 5 + 2 5 1 + 1 4 3 + dupe d+ dupe d+ dupe d+ dupe d+ dupe d+ dupe d+ am span
      </span>
    </span>
    <span class="block">
      <span class="gridgen">
        E 1 chord 6 4 3 + 3 4 5 + 2 5 1 + 1 7 5 + dupe d+ dupe d+ dupe d+ dupe d+ dupe d+ dupe d+ am span
      </span>
    </span>
    <span class="block">
      <span class="gridgen">
        E 1 chord 6 4 3 + 4 2 1 + 3 4 5 + 1 4 3 + dupe d+ dupe d+ dupe d+ dupe d+ dupe d+ dupe d+ am span
      </span>
    </span>
    <span class="block">
      <span class="gridgen">
        E 1 chord 6 4 3 + 5 2 5 + 4 2 1 + 3 4 5 + dupe d+ dupe d+ dupe d+ dupe d+ dupe d+ dupe d+ am span
      </span>
    </span>
    <span class="block">
      <span class="gridgen">
        E 1 chord 5 11 3 + 4 9 5 + 3 9 1 + 2 12 5 + dupe d+ dupe d+ dupe d+ dupe d+ dupe d+ dupe d+ am span
      </span>
    </span>
    <span class="block">
      <span class="gridgen">
        E 1 chord 4 6 3 + 3 4 5 + 2 5 1 + 1 7 5 + dupe d+ dupe d+ dupe d+ dupe d+ dupe d+ dupe d+ am span
      </span>
    </span>
    <span class="block">
      <span class="gridgen">
        E 1 chord 6 4 3 + 4 6 3 + 3 4 5 + 2 5 1 + dupe d+ dupe d+ dupe d+ dupe d+ dupe d+ dupe d+ am span
      </span>
    </span>
    <span class="block">
      <span class="gridgen">
        E 1 chord 5 11 3 + 3 13 3 + 2 12 5 + 1 12 1 + dupe d+ dupe d+ dupe d+ dupe d+ dupe d+ dupe d+ am span
      </span>
    </span>
  </p>
  <p>The <em>moving lines</em> example (<a href="#mcp">MCP</a>, p. 21) works nicely as well, since decoration stops are preserved through chord operators.</p>
  <p class="display">
    <span class="gridgen">
      E 1 chord 6 4 3 + 3 4 5 + 2 5 1 + 1 7 5 + 1 5 4 (x) 1 4 3 (=) dupe d+ dupe d+ dupe d+ dupe d+ dupe d+ dupe d+ am span
    </span>
  </p>
  <p>(<a href="#mcp">MCP</a>, p. 23) Continues the chord scale exercise with diatonic 7th chords. Here are just a few.</p>
  <p class="display">
    <span class="gridgen">
      E 1 chord 6 0 1 + 5 2 5 + 4 1 7 + 3 1 3 + dupe d+ dupe d+ dupe d+ dupe d+ dupe d+ dupe d+ am span
    </span>
  </p>
  <p class="display">
    <span class="gridgen">
      E 1 chord 5 7 1 + 4 9 5 + 3 8 7 + 2 9 3 + dupe d+ dupe d+ dupe d+ dupe d+ dupe d+ dupe d+ am span
    </span>
  </p>
  <p class="display">
    <span class="gridgen">
      E 1 chord 4 2 1 + 3 4 5 + 2 4 7 + 1 4 3 + dupe d+ dupe d+ dupe d+ dupe d+ dupe d+ dupe d+ am span
    </span>
  </p>

  <h3>The Commonality of Chords and Scales</h3>
  <p>While designed for use on chords, Gridgen is equally capable of handling scales. Here, the <code>dupe d+</code> operator is used to generate the modes of the key of D. The <code>am</code> operator aligns them into positions.</p>
  <p class="display">
    <span class="gridgen">
      D 1 chord 5 5 1 + 5 7 2 + 4 4 3 + 4 5 4 + 4 7 5 + 3 4 6 + 3 6 7 + 3 7 1 + dupe d+ dupe d+ dupe d+ dupe d+ dupe d+ dupe d+ dupe d+ am span
    </span>
  </p>
  <p>And the <code>af</code> operator lays them out across the fretboard.</p>
  <p class="display">
    <span class="gridgen">
      D 1 chord 5 5 1 + 5 7 2 + 4 4 3 + 4 5 4 + 4 7 5 + 3 4 6 + 3 6 7 + 3 7 1 + dupe d+ dupe d+ dupe d+ dupe d+ dupe d+ dupe d+ dupe d+ af span
    </span>
  </p>
  <p>It's interesting to see the modes overlaid by the arpeggios.</p>
  <p class="display">
    <span class="gridgen">
      D 1 chord 5 5 1 o 4 4 3 o 4 7 5 o 3 6 7 o 3 7 1 o 5 5 1 + 5 7 2 + 4 4 3 + 4 5 4 + 4 7 5 + 3 4 6 + 3 6 7 + 3 7 1 + dupe d+ dupe d+ dupe d+ dupe d+ dupe d+ dupe d+ dupe d+ am span
    </span>
  </p>

  <h3>The Diatonic Cycle of 4ths</h3>
  <p>(<a href="#mcp">MCP</a>, p. 49) discusses &ldquo;The Diatonic Cycle of 4ths in Major Keys.&rdquo; The first example there is straightforwardly reproduced by defining only the first two chords, <span class="chord">Cma<sup>7</sup></span> and <span class="chord">Fma<sup>7</sup></span>. Subsequent chords are each generated by an <code>over d-</code> operation. Specifically, the initial two chords on the stack are separated by a fourth. Then, <code>over</code> duplicates the <em>second</em> element from the top of the stack, and <code>d-</code> moves that duplicate down one degree.</p>
  <p class="display">
    <span class="gridgen">
      C 1 chord 6 8 1 + 5 10 5 + 3 9 3 + 2 12 7 x
      C 4 chord 5 8 1 + 4 10 5 + 3 9 7 x 2 10 3 +
      over d- over d- over d- over d- over d- over d- over d- over d- am span
    </span>
  </p>
  <p>Note how the elaboration established by the initial two chords is maintained in generated chords.</p>

  <h3>Structured Inversion</h3>
  <p>(<a href="#cc">CC</a>, p. 9) presents the concept of structured inversion as a formal way of enumerating chord voicings. The examples (<a href="#cc">CC</a>, p. 10) are straightforwardly reproduced using the <code>i+</code> operator.</p>
  <p class="display">
    <span class="gridgen">
      C 3 chord 6 3 3 + 4 2 1 + 3 4 5 + dupe i+ dupe i+ af span
    </span>
    &emsp;
    <span class="gridgen">
      A 5 chord 6 7 5 + 4 6 3 + 3 7 7 + 2 5 1 + dupe i+ dupe i+ dupe i+ af span
    </span>
  </p>

  <h3>Chord Symbol Inference</h3>
  <p>Gridgen maintains a small dictionary of chord formulas that it uses to infer the chord symbol shown at the top of each grid.</p>
  <p>Consider, <span class="gridgen">F 5 chord 6 3 5 + 5 3 1 + 4 2 3 + 3 3 7 + 2 3 2 + span</span>. This chord is defined in the key of F with 5th degree. From this alone, Gridgen knows the root is C. So, it compares the stops found on the fretboard, (G&nbsp;C&nbsp;E&nbsp;B♭&nbsp;D), with the notes of the C major scale. This gives the intervals (5&nbsp;1&nbsp;3&nbsp;♭7&nbsp;2). Sorted, (1&nbsp;2&nbsp;3&nbsp;5&nbsp;♭7) appears in the dictionary as a dominant 9 chord. But the bass note is not the root C, it's G, so Gridgen indicates this with slash notation.</p>
  <p>Now consider, <span class="gridgen">F 5 chord 5 3 1 + 4 2 3 + 3 3 7 + 2 3 2 + span</span>. This is the same chord, but it's missing the 5. Gridgen knows that 5 is often omitted, and will insert a perfect 5th, or a major 3rd, in its effort to find a matching dictionary entry.</p>

  <h3>Chord Symbol Inference Failure</h3>
  <p>Consider <span class="gridgen">C 1 chord 6 8 1 + 5 4 2 + span</span>. That's a (1 ♭2) chord, and Gridgen doesn't know what to call it. The question mark indicates that inference has failed. This can happen in two ways:</p>
  <ul>
    <li><em>Not enough notes:</em> In this example, we need to add stops. If we actually want this to be inferred as, say, a partial ♭9&nbsp;chord or the start of the C&nbsp;Phrygian scale, we can use the <code>_</code> operator to add invisible stops to fill in the gaps.</li>
    <li><em>Too many notes:</em> We would need to remove stops. The extra notes are probably due to elaboration or melody, so we can mark any such notes as <a href="#decor-stop">decoration</a>.</li>
  </ul>

  <h3>Hover Text</h3>
  <p>Hovering the mouse pointer over any any grid will display a tool tip giving the expression that generated that grid.</p>

  <h3>Console Debug Logging</h3>
  <p>If an expression is not displaying correctly, the process of evaluation can be dumped to the console log by adding the &ldquo;debug&rdquo; class to the &ldquo;gridgen&ldquo; element. Check the console now to see how <code>F 4 chord 4 8 1 + 3 7 3 + 2 6 5 + span</code> gets turned into <span class="gridgen debug">F 4 chord 4 8 1 + 3 7 3 + 2 6 5 + span</span></p>

</body>

</html>